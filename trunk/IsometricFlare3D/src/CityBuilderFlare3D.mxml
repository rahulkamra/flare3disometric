<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" backgroundAlpha="0" applicationComplete="application1_applicationCompleteHandler(event)">
	<fx:Script>
		<![CDATA[
			import flare.basic.Viewer3D;
			import flare.collisions.RayCollision;
			import flare.core.Lines3D;
			import flare.core.Mesh3D;
			import flare.core.Pivot3D;
			import flare.core.Surface3D;
			import flare.loaders.Flare3DLoader;
			import flare.primitives.Cube;
			import flare.system.Input3D;
			
			import game.IsometricGame;
			import game.entity.GridEntity;
			import game.settings.GridEntityMapping;
			
			import mx.events.FlexEvent;

			private var test:game.IsometricGame;
			
			[Embed(source='Map.jpg')]
			public static var Map:Class;
			
			
			protected function application1_applicationCompleteHandler(event:FlexEvent):void
			{
				// TODO Auto-generated method stub
				
				Input3D.enableEventPhase = false;
				test = new game.IsometricGame(stage);
				stage.addChild(test);
			}
			
			
			protected function addBuilding(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				load();
			}
			
			
			public var model:Pivot3D;
			private var mesh:Mesh3D;
			private var anim1:Flare3DLoader;
			
			private var kitchenWoodhouseUrl:String = "assets/house/bldg_general_countrykitchen_wood_t3-13.f3d"
			public function load():void{
				if(model){
					model.parent.removeChild(model);
				}
				addKitchenWoodHouse();
			}
			
			public function addKitchenWoodHouse():void{
				
				var gridEntity:GridEntity = new GridEntity(GridEntityMapping.KITCHEN_WOOD_HOUSE);
				IsometricGame.addObject(gridEntity.mesh3D);
				
			}
			
			


			
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<s:Button x="33" y="322" label="Building" click="addBuilding(event)"/>
	<!--<s:Button x="850" y="539" label="Button" click="button1_clickHandler(event)"/>-->
</s:Application>
